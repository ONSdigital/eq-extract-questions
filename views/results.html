{% extends "base.html" %}

{% block body %}
<h1 class="jupiter"> Results</h1>

    <form method="GET" action="/">
        <input type="submit" class="btn" value="Choose File" />
    </form>

    <form method="POST" action="/download">
        <input type="submit" class="btn" value="Download csv" />
        <input type="hidden" value="{{ questions | dump }}" name="questions" />
    </form>

<table class="table">
    <thead class="table--head">
    <th class="table--header--cell">Question Id </th>
    <th class="table--header--cell">Question Title</th>
    <th class="table--header--cell">Answers Id</th>
    <th class="table--header--cell">Answers Label</th>
    <th class="table--header--cell">Options Label</th>
    <th class="table--header--cell">Options Value</th>
    </thead>
    <tbody>
    {%for question in questions %}
       {%for answer in question.answers %}
            {% if answer.options %}
                {%for option in answer.options %}
                    <tr class="table--row">
                        <td class="table--cell">
                            {{question.id }}
                        </td>
                        <td class="table--cell">
                            {{ question.title }}
                        </td>
                        <td class="table--cell">
                            {{ answer.id }}
                        </td>
                        <td class="table--cell">
                            {{ answer.label }}
                        </td>
                        <td class="table--cell">
                            {{ option.label }}
                        </td>
                        <td class="table--cell">
                            {{ option.value }}
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr class="table--row">
                    <td class="table--cell">
                        {{question.id }}
                    </td>
                    <td class="table--cell">
                        {{ question.title }}
                    </td>
                    <td class="table--cell">
                        {{ answer.id }}
                    </td>
                    <td class="table--cell">
                        {{ answer.label }}
                    </td>
                    <td class="table--cell"></td>
                    <td class="table--cell"></td>
                </tr>
            {% endif %}
        {% endfor %}
    {% endfor %}
    </tbody>
</table>

{% endblock %}

